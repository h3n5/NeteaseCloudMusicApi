(window['webpackJsonp'] = window['webpackJsonp'] || []).push([['PlayList'], {'0668': function(t, e, a){}, '1aa2': function(t, e, a){}, '23cc': function(t, e, a){}, '60fc': function(t, e, a){'use strict';var s = a('aab9'), n = a.n(s);n.a}, '7a57': function(t, e, a){'use strict';a.r(e);var s = function(){var t = this, e = t.$createElement, a = t._self._c || e;return a('div', {staticClass: 'playlist-detail'}, [a('DetailHeader', {attrs: {playlist: t.playlist, songs: t.songs}}), a('div', {staticClass: 'tabs-wrap'}, [a('a-tabs', {model: {value: t.activeTab, callback: function(e){t.activeTab = e}, expression: 'activeTab'}}, t._l(t.tabs, (function(t, e){return a('a-tab-pane', {key: e, attrs: {tab: t}})})), 1), a('input-search', {directives: [{name: 'show', rawName: 'v-show', value: t.activeTab === t.SONG_IDX, expression: 'activeTab === SONG_IDX'}], staticClass: 'input', class: t.getInputCls(), attrs: {placeholder: '搜索歌单音乐'}, on: {blur: t.onInputBlur, focus: t.onInputFocus}, model: {value: t.searchValue, callback: function(e){t.searchValue = e}, expression: 'searchValue'}})], 1), t.searchValue && !t.filteredSongs.length ? a('div', {staticClass: 'empty'}, [t._v(' 未能找到和 '), a('span', {staticClass: 'keyword'}, [t._v('“' + t._s(t.searchValue) + '”')]), t._v(' 相关的任何音乐 ')]) : t._e(), a('SongTable', {directives: [{name: 'show', rawName: 'v-show', value: t.activeTab === t.SONG_IDX, expression: 'activeTab === SONG_IDX'}], staticClass: 'table', attrs: {songs: t.filteredSongs}, on: {click: t.jumpMusicDetail}}), a('div', {directives: [{name: 'show', rawName: 'v-show', value: 1 === t.activeTab, expression: 'activeTab === 1'}], staticClass: 'comments'}, [a('Comments', {attrs: {id: t.id, type: 'playlist'}, on: {update: t.onCommentsUpdate}})], 1)], 1)}, n = [], i = (a('99af'), a('4de4'), a('caad'), a('d81d'), a('fb6a'), a('a434'), a('b0c0'), a('a9e3'), a('2532'), a('5530')), r = (a('96cf'), a('1da1')), c = (a('a71a'), a('b558')), o = function(){var t = this, e = t.$createElement, a = t._self._c || e;return a('div', {staticClass: 'header'}, [a('div', {staticClass: 'img-wrap'}, [a('img', {attrs: {src: t.playlist.coverImgUrl}})]), a('div', {staticClass: 'content'}, [a('div', {staticClass: 'title-wrap'}, [a('p', {staticClass: 'title'}, [t._v(t._s(t.playlist.name))])]), a('div', {staticClass: 'creator-wrap'}, [a('img', {directives: [{name: 'lazy', rawName: 'v-lazy', value: t.playlist.creator.avatarUrl, expression: 'playlist.creator.avatarUrl'}], staticClass: 'avatar'}), a('p', {staticClass: 'creator'}, [t._v(t._s(t.playlist.creator.nickname))]), a('p', {staticClass: 'create-time'}, [t._v(t._s(t.$utils.formatDate(t.playlist.createTime, 'yyyy-MM-dd')) + ' 创建')])]), a('div', {staticClass: 'action-wrap'}, [a('a-button', {staticClass: 'button', on: {click: t.playAll}}, [a('a-icon', {staticClass: 'icon middle', staticStyle: {color: '#fff'}, attrs: {type: 'play-circle'}}), a('span', {staticClass: 'middle'}, [t._v('播放全部')])], 1)], 1), a('div', {staticClass: 'desc-wrap'}, [t.tagsText ? a('p', {staticClass: 'desc'}, [a('span', [t._v('标签：' + t._s(t.tagsText))])]) : t._e(), t.playlist.description ? a('p', {staticClass: 'desc'}, [a('span', {staticClass: 'value'}, [t._v('简介：' + t._s(t.playlist.description))])]) : t._e()])])])}, l = [], u = (a('a15b'), a('2f62')), m = {props: {playlist: {type: Object, default: function(){return{}}}, songs: {type: Array, default: function(){return[]}}}, methods: Object(i['a'])({playAll: function(){this.clearSongList(), this.setSongList(this.songs), this.playMusicById(this.songs[0])}}, Object(u['d'])(['setSongList', 'clearSongList']), {}, Object(u['b'])(['playMusicById'])), computed: {tagsText: function(){return this.playlist.tags.join('/')}}}, p = m, d = (a('cd8d'), a('2877')), v = Object(d['a'])(p, o, l, !1, null, '556e54ac', null), h = v.exports, f = a('543b'), b = function(){var t = this, e = t.$createElement, a = t._self._c || e;return a('div', {staticClass: 'comment'}, [t.shouldHotCommentShow || t.shouldCommentShow ? [t.shouldHotCommentShow ? a('div', {staticClass: 'block'}, [a('p', {staticClass: 'title'}, [t._v('精彩评论')]), t._l(t.hotComments, (function(t){return a('Comment', {key: t.id, attrs: {border: '', comment: t}})}))], 2) : t._e(), t.shouldCommentShow ? a('div', {staticClass: 'block'}, [a('p', {ref: 'commentTitle', staticClass: 'title'}, [t._v(' 最新评论 '), a('span', {staticClass: 'count'}, [t._v('(' + t._s(t.total) + ')')])]), t._l(t.comments, (function(t){return a('Comment', {key: t.id, attrs: {border: '', comment: t}})}))], 2) : t._e(), a('Pagination', {staticClass: 'pagination', attrs: {pageSize: t.PAGE_SIZE, total: t.total}, on: {change: t.onPageChange}, model: {value: t.pageIndex, callback: function(e){t.pageIndex = e}, expression: 'pageIndex'}})] : a('a-empty', [t._v('还没有评论哦~')])], 2)}, g = [], C = a('ade3'), y = (a('9967'), a('de1b')), _ = function(){var t = this, e = t.$createElement, a = t._self._c || e;return t.comment ? a('div', {staticClass: 'comment'}, [a('div', {staticClass: 'avatar'}, [a('img', {directives: [{name: 'lazy', rawName: 'v-lazy', value: t.$utils.setSizeImgUrl(t.comment.user.avatarUrl, 80), expression: '$utils.setSizeImgUrl(comment.user.avatarUrl, 80)'}]})]), a('div', {staticClass: 'content', class: {border: t.border}}, [a('p', {staticClass: 'comment-text'}, [a('span', {staticClass: 'username'}, [t._v(t._s(t.comment.user.nickname) + ':')]), a('span', {staticClass: 'text'}, [t._v(t._s(t.comment.content))])]), t.comment.beReplied.length ? a('div', {staticClass: 'replied'}, [a('p', {staticClass: 'comment-text'}, [a('span', {staticClass: 'username'}, [t._v(t._s(t.comment.beReplied[0].user.nickname) + ':')]), a('span', {staticClass: 'text'}, [t._v(t._s(t.comment.beReplied[0].content))])])]) : t._e(), a('div', {staticClass: 'bottom'}, [a('span', {staticClass: 'date'}, [t._v(t._s(t.$utils.formatDate(t.comment.time)))]), a('div', {staticClass: 'actions'}, [a('a-icon', {staticStyle: {fontSize: '12px'}, attrs: {type: 'like'}}), t._v(' ' + t._s(t.comment.likedCount) + ' ')], 1)])])]) : t._e()}, w = [], x = {props: ['comment', 'border']}, S = x, I = (a('e4ed'), Object(d['a'])(S, _, w, !1, null, 'bafa6058', null)), O = I.exports, k = a('365c'), j = 'song', T = 'playlist', R = 'mv', M = {name: 'Comments', components: {Comment: O, Pagination: y['a']}, props: {id: {type: Number, required: !0}, type: {type: String, default: j}}, data: function(){return{pageIndex: 0, PAGE_SIZE: 20, loading: !1, hotComments: [], comments: [], total: 0}}, watch: {id: {handler: function(t){t && (this.pageIndex = 0, this.getComment())}, immediate: !0}}, computed: {shouldHotCommentShow: function(){return this.hotComments.length > 0 && 1 === this.currentPage}, shouldCommentShow: function(){return this.comments.length > 0}}, methods: {getComment: function(){var t = this;return Object(r['a'])(regeneratorRuntime.mark((function e(){var a, s, n, i, r, c, o, l, u, m, p, d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev = e.next){case 0:return t.loading = !0, a = {}, Object(C['a'])(a, T, k['f']), Object(C['a'])(a, j, k['g']), Object(C['a'])(a, R, k['e']), s = a, n = s[t.type], e.next = 5, n({id: t.id, pageSize: t.PAGE_SIZE, offset: t.pageIndex});case 5:if(i = e.sent, r = i.hotComments, c = void 0 === r ? [] : r, o = i.comments, l = void 0 === o ? [] : o, u = i.total, t.type !== T || 1 !== t.currentPage){e.next = 20;break}return e.next = 14, Object(k['b'])({id: t.id, type: 2});case 14:m = e.sent, p = m.hotComments, d = void 0 === p ? [] : p, t.hotComments = d, e.next = 21;break;case 20:t.hotComments = c;case 21:t.comments = l, t.total = u, t.$emit('update', {comments: l, hotComments: c, total: u});case 24:case'end':return e.stop()}}), e)})))()}, onPageChange: function(){var t = this;return Object(r['a'])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev = e.next){case 0:return e.next = 2, t.getComment();case 2:case'end':return e.stop()}}), e)})))()}}}, N = M, E = (a('60fc'), Object(d['a'])(N, b, g, !1, null, '7cacc1de', null)), D = E.exports, $ = 500, P = 0, z = 1, A = {name: 'Album', components: {DetailHeader: h, SongTable: f['a'], Comments: D, InputSearch: c['a'].Search}, created: function(){var t = this;return Object(r['a'])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev = e.next){case 0:t.SONG_IDX = P, t.COMMENT_IDX = z;case 2:case'end':return e.stop()}}), e)})))()}, data: function(){return{tabs: ['歌曲列表', '评论'], activeTab: P, playlist: {creator: {}, tags: []}, songs: [], searchValue: '', inputFocus: !1}}, methods: Object(i['a'])({}, Object(u['d'])(['setMusic']), {}, Object(u['b'])(['playMusicById']), {jumpMusicDetail: function(t){var e = this;return Object(r['a'])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev = a.next){case 0:return a.next = 2, e.playMusicById(t);case 2:s = a.sent, e.$music.play(s);case 4:case'end':return a.stop()}}), a)})))()}, init: function(){var t = this;return Object(r['a'])(regeneratorRuntime.mark((function e(){var a, s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev = e.next){case 0:return e.next = 2, Object(k['c'])({id: t.id});case 2:a = e.sent, s = a.playlist, t.playlist = s, t.genSonglist(s);case 6:case'end':return e.stop()}}), e)})))()}, genSonglist: function(t){var e = this;return Object(r['a'])(regeneratorRuntime.mark((function a(){var s, n, i, r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev = a.next){case 0:if(s = t.trackIds.map((function(t){var e = t.id;return e})), s.length){a.next = 3;break}return a.abrupt('return');case 3:return a.next = 5, Object(k['h'])(s.slice(0, $));case 5:n = a.sent, i = n.songs, r = void 0 === i ? [] : i, e.songs = r;case 9:case'end':return a.stop()}}), a)})))()}, onCommentsUpdate: function(t){var e = t.total;this.tabs.splice(z, 1, '评论('.concat(e, ')'))}, onInputFocus: function(){this.inputFocus = !0}, onInputBlur: function(){this.inputFocus = !1}, getInputCls: function(){return this.inputFocus ? '' : 'inactive'}}), computed: {id: function(){return Number(this.$route.params.id)}, filteredSongs: function(){var t = this;return this.songs.filter((function(e){var a = e.name, s = e.artistsText, n = e.albumName;return''.concat(a).concat(s).concat(n).toLowerCase().includes(t.searchValue.toLowerCase())}))}}, watch: {id: {handler: function(){this.searchValue = '', this.init()}, immediate: !0}}}, U = A, G = (a('c406'), Object(d['a'])(U, s, n, !1, null, '6b4b4042', null));e['default'] = G.exports}, a434: function(t, e, a){'use strict';var s = a('23e7'), n = a('23cb'), i = a('a691'), r = a('50c4'), c = a('7b0b'), o = a('65f0'), l = a('8418'), u = a('1dde'), m = a('ae40'), p = u('splice'), d = m('splice', {ACCESSORS: !0, 0: 0, 1: 2}), v = Math.max, h = Math.min, f = 9007199254740991, b = 'Maximum allowed length exceeded';s({target: 'Array', proto: !0, forced: !p || !d}, {splice: function(t, e){var a, s, u, m, p, d, g = c(this), C = r(g.length), y = n(t, C), _ = arguments.length;if(0 === _ ? a = s = 0 : 1 === _ ? (a = 0, s = C - y) : (a = _ - 2, s = h(v(i(e), 0), C - y)), C + a - s > f)throw TypeError(b);for(u = o(g, s), m = 0;m < s;m++)p = y + m, p in g && l(u, m, g[p]);if(u.length = s, a < s){for(m = y;m < C - s;m++)p = m + s, d = m + a, p in g ? g[d] = g[p] : delete g[d];for(m = C;m > C - s + a;m--)delete g[m - 1]}else if(a > s)for(m = C - s;m > y;m--)p = m + s - 1, d = m + a - 1, p in g ? g[d] = g[p] : delete g[d];for(m = 0;m < a;m++)g[m + y] = arguments[m + 2];return g.length = C - s + a, u}})}, aab9: function(t, e, a){}, c406: function(t, e, a){'use strict';var s = a('1aa2'), n = a.n(s);n.a}, cd8d: function(t, e, a){'use strict';var s = a('0668'), n = a.n(s);n.a}, e4ed: function(t, e, a){'use strict';var s = a('23cc'), n = a.n(s);n.a}}]);
//# sourceMappingURL=PlayList.b5183448.js.map